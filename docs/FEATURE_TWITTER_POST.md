# TwitteræŠ•ç¨¿æ©Ÿèƒ½ ä»•æ§˜æ›¸

## ğŸ“‹ æ¦‚è¦

ç‚ä¸Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ç”Ÿæˆã—ãŸç‚ä¸Šãƒ†ã‚­ã‚¹ãƒˆã‚’ã€ãã®ã¾ã¾Twitterï¼ˆXï¼‰ã«æŠ•ç¨¿ã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚

## ğŸš¨ å®Ÿè£…çŠ¶æ³

**ç¾åœ¨ã®å®Ÿè£…**: âœ… **Twitter APIçµ±åˆå®Œäº†**ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿ã®ã¿ï¼‰
**å®Ÿéš›ã®æŠ•ç¨¿**: âš ï¸ **éƒ¨åˆ†çš„ã«å®Ÿè£…**ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿ã¯å®Œäº†ã€ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¯åˆ¶é™ã‚ã‚Šï¼‰

> **é‡è¦**: ãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿æ©Ÿèƒ½ã¯å®Œå…¨ã«å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€æœ‰åŠ¹ãªTwitter APIèªè¨¼æƒ…å ±ãŒã‚ã‚Œã°å®Ÿéš›ã«æŠ•ç¨¿ã§ãã¾ã™ã€‚
> ç”»åƒä»˜ãæŠ•ç¨¿ã¯ã€go-twitterãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®åˆ¶é™ã«ã‚ˆã‚Šã€å®Œå…¨ãªå®Ÿè£…ã«ã¯è¿½åŠ ã®ä½œæ¥­ãŒå¿…è¦ã§ã™ã€‚
> è©³ç´°ã¯[ä»Šå¾Œå¿…è¦ãªå®Ÿè£…ä½œæ¥­](#ä»Šå¾Œå¿…è¦ãªå®Ÿè£…ä½œæ¥­)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ¯ ç›®çš„

- ç”Ÿæˆã—ãŸç‚ä¸Šãƒ†ã‚­ã‚¹ãƒˆã‚’ç°¡å˜ã«Twitterã«å…±æœ‰ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®å‘ä¸Šï¼ˆã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆã®æ‰‹é–“ã‚’å‰Šæ¸›ï¼‰
- ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³çµæœã®å®Ÿéš›ã®åå¿œã‚’ç¢ºèªã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

**ã“ã®æ©Ÿèƒ½ã¯æ•™è‚²ç›®çš„ã®ã¿ã§ã®ä½¿ç”¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚**

- å®Ÿéš›ã«ç‚ä¸Šã‚’å¼•ãèµ·ã“ã™ç›®çš„ã§ã®ä½¿ç”¨ã¯å³ç¦
- æŠ•ç¨¿å‰ã«å¿…ãšå†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„
- æœ¬æ©Ÿèƒ½ã®æ‚ªç”¨ã«ã‚ˆã‚‹ä¸€åˆ‡ã®è²¬ä»»ã¯ä½¿ç”¨è€…ãŒè² ã„ã¾ã™

## ğŸ”§ æ©Ÿèƒ½è¦ä»¶

### 1. UIè¦ä»¶

#### 1.1 æŠ•ç¨¿ãƒœã‚¿ãƒ³ã®è¿½åŠ 

**é…ç½®å ´æ‰€**: ç‚ä¸Šãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆçµæœã®è¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆ[frontend/src/components/ResultDisplay.tsx](../frontend/src/components/ResultDisplay.tsx)ï¼‰

**ãƒœã‚¿ãƒ³ä»•æ§˜**:
- ãƒ©ãƒ™ãƒ«: ã€ŒğŸ¦ Twitterã«æŠ•ç¨¿ã€ã¾ãŸã¯ã€Œğ• Xã«æŠ•ç¨¿ã€
- ãƒ‡ã‚¶ã‚¤ãƒ³: Twitter/Xãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼ï¼ˆ#1DA1F2 ã¾ãŸã¯ #000000ï¼‰
- çŠ¶æ…‹:
  - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: æœ‰åŠ¹
  - æŠ•ç¨¿ä¸­: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  - æŠ•ç¨¿å®Œäº†: æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
  - ã‚¨ãƒ©ãƒ¼æ™‚: ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

#### 1.2 æŠ•ç¨¿å‰ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

**è¡¨ç¤ºã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ã€ŒTwitterã«æŠ•ç¨¿ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚

**ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å†…å®¹**:
```
âš ï¸ Twitter/Xã«æŠ•ç¨¿ã—ã¾ã™ã‹ï¼Ÿ

æŠ•ç¨¿å†…å®¹:
ã€Œ[ç”Ÿæˆã•ã‚ŒãŸç‚ä¸Šãƒ†ã‚­ã‚¹ãƒˆ]ã€

æ³¨æ„: ã“ã®æŠ•ç¨¿ã¯ç‚ä¸Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚
æŠ•ç¨¿ã«ã‚ˆã‚‹å½±éŸ¿ã¯è‡ªå·±è²¬ä»»ã¨ãªã‚Šã¾ã™ã€‚

[ã‚­ãƒ£ãƒ³ã‚»ãƒ«] [æŠ•ç¨¿ã™ã‚‹]
```

#### 1.3 æŠ•ç¨¿è¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰

**è¨­å®šé …ç›®**:
- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã®è¿½åŠ : `#ç‚ä¸Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼` ã‚’è‡ªå‹•ä»˜ä¸ã™ã‚‹ã‹
- å…è²¬æ–‡è¨€ã®è¿½åŠ : ã€Œâ€»ç‚ä¸Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ç”Ÿæˆã€ã‚’æœ«å°¾ã«è¿½åŠ ã™ã‚‹ã‹

### 2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰è¦ä»¶

#### 2.1 Twitter APIçµ±åˆ

**ä½¿ç”¨API**: Twitter API v2

**å¿…è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `POST /2/tweets` - ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿

**èªè¨¼æ–¹å¼**:
- OAuth 2.0 (User Context)
- ã¾ãŸã¯ OAuth 1.0a (User Authentication)

#### 2.2 GraphQL Mutationè¿½åŠ 

**æ–°è¦Mutation**: `postToTwitter`

**ã‚¹ã‚­ãƒ¼ãƒå®šç¾©**:
```graphql
type Mutation {
  # æ—¢å­˜ã®Mutation
  generateInflammatoryText(input: GenerateInput!): GenerateResult!
  generateReplies(text: String!): [Reply!]!

  # æ–°è¦è¿½åŠ 
  postToTwitter(input: TwitterPostInput!): TwitterPostResult!
}

input TwitterPostInput {
  text: String!
  addHashtag: Boolean
  addDisclaimer: Boolean
}

type TwitterPostResult {
  success: Boolean!
  tweetId: String
  tweetUrl: String
  errorMessage: String
}
```

#### 2.3 ç’°å¢ƒå¤‰æ•°

**æ–°è¦è¿½åŠ ã™ã‚‹ç’°å¢ƒå¤‰æ•°** ([backend/.env](../backend/.env)):

```env
# Twitter API Configuration
TWITTER_API_KEY=your_twitter_api_key_here
TWITTER_API_SECRET=your_twitter_api_secret_here
TWITTER_ACCESS_TOKEN=your_access_token_here
TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret_here

# ã¾ãŸã¯ OAuth 2.0ã®å ´åˆ
TWITTER_CLIENT_ID=your_client_id_here
TWITTER_CLIENT_SECRET=your_client_secret_here
```

#### 2.4 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**æƒ³å®šã•ã‚Œã‚‹ã‚¨ãƒ©ãƒ¼**:
1. èªè¨¼ã‚¨ãƒ©ãƒ¼ï¼ˆç„¡åŠ¹ãªAPIã‚­ãƒ¼/ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰
2. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ï¼ˆAPIåˆ¶é™è¶…éï¼‰
3. é‡è¤‡ãƒ„ã‚¤ãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆåŒã˜å†…å®¹ã®é€£ç¶šæŠ•ç¨¿ï¼‰
4. æ–‡å­—æ•°è¶…éã‚¨ãƒ©ãƒ¼ï¼ˆ280å­—åˆ¶é™ï¼‰
5. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹**:
```
- "Twitter APIã®èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ"
- "æŠ•ç¨¿åˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãå¾…ã£ã¦ã‹ã‚‰å†è©¦è¡Œã—ã¦ãã ã•ã„"
- "åŒã˜å†…å®¹ã‚’é€£ç¶šã—ã¦æŠ•ç¨¿ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“"
- "æŠ•ç¨¿å†…å®¹ãŒ280æ–‡å­—ã‚’è¶…ãˆã¦ã„ã¾ã™"
- "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
```

### 3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

#### 3.1 èªè¨¼æƒ…å ±ã®ä¿è­·

- Twitter APIã‚­ãƒ¼ã¯ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†
- `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`.gitignore`ã«è¿½åŠ ï¼ˆæ—¢å­˜ï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«APIã‚­ãƒ¼ã‚’éœ²å‡ºã—ãªã„

#### 3.2 ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–

**Twitter APIåˆ¶é™**:
- ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿: 300ãƒ„ã‚¤ãƒ¼ãƒˆ/3æ™‚é–“ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ï¼‰
- ã‚¢ãƒ—ãƒªãƒ¬ãƒ™ãƒ«: 1,500ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/15åˆ†

**å®Ÿè£…ã™ã‚‹åˆ¶é™**:
1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: é€£ç¶šæŠ•ç¨¿ã®é˜²æ­¢ï¼ˆæœ€ä½10ç§’é–“éš”ï¼‰
2. ã‚µãƒ¼ãƒãƒ¼å´: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
3. ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆExponential Backoffï¼‰

#### 3.3 æŠ•ç¨¿å†…å®¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

1. æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ï¼ˆ280æ–‡å­—ä»¥å†…ï¼‰
2. ç¦æ­¢ãƒ¯ãƒ¼ãƒ‰ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
3. ç©ºæ–‡å­—ãƒã‚§ãƒƒã‚¯

### 4. å®Ÿè£…æ‰‹é †ï¼ˆTDDæº–æ‹ ï¼‰

#### Phase 1: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¨ãƒ†ã‚¹ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/graph/schema.graphqls`

```graphql
# TwitteræŠ•ç¨¿æ©Ÿèƒ½ã®ã‚¹ã‚­ãƒ¼ãƒè¿½åŠ 
input TwitterPostInput {
  text: String!
  addHashtag: Boolean
  addDisclaimer: Boolean
}

type TwitterPostResult {
  success: Boolean!
  tweetId: String
  tweetUrl: String
  errorMessage: String
}

extend type Mutation {
  postToTwitter(input: TwitterPostInput!): TwitterPostResult!
}
```

**å®Ÿè¡Œ**:
```bash
cd backend
go run github.com/99designs/gqlgen generate
```

#### Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆRed â†’ Green â†’ Refactorï¼‰

**Step 1 - Red**: ãƒ†ã‚¹ãƒˆã‚’å…ˆã«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/twitter/client_test.go`

```go
package twitter

import (
	"context"
	"testing"
)

func TestNewClient(t *testing.T) {
	// APIã‚­ãƒ¼ãŒç©ºã®å ´åˆã¯ã‚¨ãƒ©ãƒ¼
	client, err := NewClient("", "", "", "")
	if err == nil {
		t.Error("Expected error for empty API key")
	}
	if client != nil {
		t.Error("Expected nil client")
	}
}

func TestPostTweet(t *testing.T) {
	// ãƒ¢ãƒƒã‚¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ãƒ†ã‚¹ãƒˆ
	// ... ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…
}
```

**Step 2 - Green**: æœ€å°é™ã®å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/twitter/client.go`

```go
package twitter

import (
	"context"
	"errors"
	"fmt"
)

type Client struct {
	apiKey            string
	apiSecret         string
	accessToken       string
	accessTokenSecret string
}

func NewClient(apiKey, apiSecret, accessToken, accessTokenSecret string) (*Client, error) {
	if apiKey == "" || apiSecret == "" || accessToken == "" || accessTokenSecret == "" {
		return nil, errors.New("all Twitter API credentials are required")
	}

	return &Client{
		apiKey:            apiKey,
		apiSecret:         apiSecret,
		accessToken:       accessToken,
		accessTokenSecret: accessTokenSecret,
	}, nil
}

func (c *Client) PostTweet(ctx context.Context, text string, options ...TweetOption) (*TweetResult, error) {
	// å®Ÿè£…
	return nil, nil
}
```

**Step 3 - Refactor**: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã¨æœ€é©åŒ–

**ãƒ•ã‚¡ã‚¤ãƒ«**: `backend/graph/schema.resolvers.go`

```go
// PostToTwitter is the resolver for the postToTwitter field.
func (r *mutationResolver) PostToTwitter(ctx context.Context, input model.TwitterPostInput) (*model.TwitterPostResult, error) {
	// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
	if input.Text == "" {
		return &model.TwitterPostResult{
			Success:      false,
			ErrorMessage: stringPtr("æŠ•ç¨¿å†…å®¹ãŒç©ºã§ã™"),
		}, nil
	}

	// æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯
	if len([]rune(input.Text)) > 280 {
		return &model.TwitterPostResult{
			Success:      false,
			ErrorMessage: stringPtr("æŠ•ç¨¿å†…å®¹ãŒ280æ–‡å­—ã‚’è¶…ãˆã¦ã„ã¾ã™"),
		}, nil
	}

	// TwitteræŠ•ç¨¿
	result, err := r.twitterClient.PostTweet(ctx, input.Text)
	if err != nil {
		return &model.TwitterPostResult{
			Success:      false,
			ErrorMessage: stringPtr(err.Error()),
		}, nil
	}

	return &model.TwitterPostResult{
		Success:  true,
		TweetID:  &result.ID,
		TweetURL: stringPtr(fmt.Sprintf("https://twitter.com/user/status/%s", result.ID)),
	}, nil
}
```

#### Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆRed â†’ Green â†’ Refactorï¼‰

**Step 1 - Red**: ãƒ†ã‚¹ãƒˆã‚’å…ˆã«ä½œæˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/__tests__/TwitterPostButton.test.tsx`

```typescript
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { MockedProvider } from '@apollo/client/testing'
import TwitterPostButton from '../TwitterPostButton'
import { POST_TO_TWITTER } from '@/lib/graphql/queries'

describe('TwitterPostButton', () => {
  it('renders post button', () => {
    render(
      <MockedProvider>
        <TwitterPostButton text="ãƒ†ã‚¹ãƒˆãƒ„ã‚¤ãƒ¼ãƒˆ" />
      </MockedProvider>
    )
    expect(screen.getByText(/Twitterã«æŠ•ç¨¿/)).toBeInTheDocument()
  })

  it('shows confirmation dialog on click', () => {
    // ... ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…
  })

  it('posts to Twitter on confirmation', async () => {
    // ... ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å®Ÿè£…
  })
})
```

**Step 2 - Green**: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/TwitterPostButton.tsx`

```typescript
'use client'

import React, { useState } from 'react'
import { useMutation } from '@apollo/client'
import { POST_TO_TWITTER } from '@/lib/graphql/queries'

interface TwitterPostButtonProps {
  text: string
  addHashtag?: boolean
  addDisclaimer?: boolean
}

export default function TwitterPostButton({
  text,
  addHashtag = true,
  addDisclaimer = true,
}: TwitterPostButtonProps) {
  const [showDialog, setShowDialog] = useState(false)

  const [postToTwitter, { loading }] = useMutation(POST_TO_TWITTER, {
    onCompleted: (data) => {
      if (data.postToTwitter.success) {
        alert('Twitterã«æŠ•ç¨¿ã—ã¾ã—ãŸï¼')
        window.open(data.postToTwitter.tweetUrl, '_blank')
      } else {
        alert(`ã‚¨ãƒ©ãƒ¼: ${data.postToTwitter.errorMessage}`)
      }
      setShowDialog(false)
    },
    onError: (error) => {
      alert(`ã‚¨ãƒ©ãƒ¼: ${error.message}`)
      setShowDialog(false)
    },
  })

  const handlePost = () => {
    postToTwitter({
      variables: {
        input: { text, addHashtag, addDisclaimer },
      },
    })
  }

  return (
    <>
      <button
        onClick={() => setShowDialog(true)}
        className="btn btn-twitter"
        disabled={loading}
      >
        {loading ? 'æŠ•ç¨¿ä¸­...' : 'ğŸ¦ Twitterã«æŠ•ç¨¿'}
      </button>

      {showDialog && (
        <ConfirmDialog
          text={text}
          onConfirm={handlePost}
          onCancel={() => setShowDialog(false)}
        />
      )}
    </>
  )
}
```

**Step 3 - Refactor**: æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¸ã®çµ±åˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/ResultDisplay.tsx`

```typescript
// TwitterPostButtonã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import TwitterPostButton from './TwitterPostButton'

// çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ã«ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
<div className="flex gap-2 mt-4">
  <button onClick={onGenerateReplies}>
    ğŸ’¬ ãƒªãƒ—ãƒ©ã‚¤ã‚’ç”Ÿæˆ
  </button>
  <TwitterPostButton text={result.inflammatory} />
</div>
```

#### Phase 4: GraphQL Queryè¿½åŠ 

**ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/lib/graphql/queries.ts`

```typescript
export const POST_TO_TWITTER = gql`
  mutation PostToTwitter($input: TwitterPostInput!) {
    postToTwitter(input: $input) {
      success
      tweetId
      tweetUrl
      errorMessage
    }
  }
`

export interface PostToTwitterData {
  postToTwitter: {
    success: boolean
    tweetId?: string
    tweetUrl?: string
    errorMessage?: string
  }
}

export interface PostToTwitterVariables {
  input: {
    text: string
    addHashtag?: boolean
    addDisclaimer?: boolean
  }
}
```

### 5. ä¾å­˜é–¢ä¿‚

#### 5.1 Goãƒ©ã‚¤ãƒ–ãƒ©ãƒª

**æ¨å¥¨**: `github.com/dghubble/go-twitter` ã¾ãŸã¯ `github.com/g8rswimmer/go-twitter`

**ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:
```bash
cd backend
go get github.com/dghubble/go-twitter/twitter
go get github.com/dghubble/oauth1
```

#### 5.2 TypeScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒª

ç‰¹ã«ãªã—ï¼ˆæ—¢å­˜ã®Apollo Clientã§å¯¾å¿œå¯èƒ½ï¼‰

### 6. Twitter APIè¨­å®šæ‰‹é †

#### 6.1 Twitter Developer Portalã§ã‚¢ãƒ—ãƒªä½œæˆ

1. https://developer.twitter.com/en/portal/dashboard ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒCreate Appã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¢ãƒ—ãƒªåã€èª¬æ˜ã‚’å…¥åŠ›
4. App Permissions: ã€ŒRead and Writeã€ã‚’é¸æŠ
5. API Key & Secret ã‚’å–å¾—
6. Access Token & Secret ã‚’ç”Ÿæˆ

#### 6.2 ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
# backend/.env ã«è¿½åŠ 
TWITTER_API_KEY=your_api_key_here
TWITTER_API_SECRET=your_api_secret_here
TWITTER_ACCESS_TOKEN=your_access_token_here
TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret_here
```

### 7. ãƒ†ã‚¹ãƒˆè¨ˆç”»

#### 7.1 ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯å®Ÿè£…ï¼‰

- [x] `twitter.NewClient` - APIã‚­ãƒ¼æ¤œè¨¼ âœ… å®Œäº†
- [x] `twitter.PostTweet` - æŠ•ç¨¿æˆåŠŸã‚±ãƒ¼ã‚¹ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ âœ… å®Œäº†
- [x] `twitter.PostTweet` - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ âœ… å®Œäº†
- [x] `twitter.PostTweet` - ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã€å…è²¬æ–‡è¨€ï¼‰ âœ… å®Œäº†
- [x] `twitter.uploadMedia` - ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ âœ… å®Œäº†
- [x] `twitter.PostTweetWithImage` - ç”»åƒä»˜ãæŠ•ç¨¿ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ âœ… å®Œäº†
- [x] `resolvers.PostToTwitter` - ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ âœ… å®Œäº†
- [x] `TwitterPostButton` - UIå‹•ä½œç¢ºèª âœ… å®Œäº†

**ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 89.8% (twitter package)

#### 7.2 çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆå®ŸAPIå®Ÿè£…å¾Œã«å¿…è¦ï¼‰

- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰â†’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰â†’Twitter APIã®ä¸€é€£ã®æµã‚Œ ğŸ”´ TODO
- [ ] ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¢ºèªï¼ˆèªè¨¼å¤±æ•—ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãªã©ï¼‰ ğŸ”´ TODO
- [ ] ç”»åƒä»˜ãæŠ•ç¨¿ã®å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆ ğŸ”´ TODO

#### 7.3 æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆå®ŸAPIå®Ÿè£…å¾Œã«å¿…è¦ï¼‰

- [ ] å®Ÿéš›ã®Twitterã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®æŠ•ç¨¿ç¢ºèª ğŸ”´ TODO
- [ ] 280æ–‡å­—åˆ¶é™ã®ç¢ºèª ğŸ”´ TODO
- [ ] ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒ»å…è²¬æ–‡è¨€ã®è¿½åŠ ç¢ºèª ğŸ”´ TODO
- [ ] ç”»åƒä»˜ãæŠ•ç¨¿ã®ç¢ºèª ğŸ”´ TODO
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºç¢ºèª ğŸ”´ TODO

### 8. ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³

#### âœ… Mile 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ï¼ˆå®Œäº†ï¼‰

- [x] GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾© âœ…
- [x] Twitter Clientã®å®Ÿè£…ï¼ˆOAuth 1.0aèªè¨¼ä»˜ãï¼‰ âœ…
- [x] Resolverã®å®Ÿè£… âœ…
- [x] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ âœ…
- [x] ç”»åƒä»˜ãæŠ•ç¨¿æ©Ÿèƒ½ã®è¿½åŠ ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ âœ…

**å®Œäº†æ—¥**: 2025-10-17

#### âœ… Mile 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…ï¼ˆå®Œäº†ï¼‰

- [x] TwitterPostButtonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ âœ…
- [x] ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®å®Ÿè£… âœ…
- [x] æ—¢å­˜UIã¸ã®çµ±åˆ âœ…
- [x] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ âœ…
- [x] ç”»åƒURLå¯¾å¿œ âœ…

**å®Œäº†æ—¥**: 2025-10-17

#### âœ… Mile 3: çµ±åˆã¨ãƒ†ã‚¹ãƒˆï¼ˆãƒ¢ãƒƒã‚¯å®Ÿè£…ã®ã¿å®Œäº†ï¼‰

- [x] ãƒ¢ãƒƒã‚¯å®Ÿè£…ã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ âœ…
- [ ] å®Ÿéš›ã®Twitter APIã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ ğŸ”´ TODO
- [ ] æ‰‹å‹•ãƒ†ã‚¹ãƒˆ ğŸ”´ TODO
- [ ] ãƒã‚°ä¿®æ­£ ğŸ”´ TODO

#### âœ… Mile 4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆå®Œäº†ï¼‰

- [x] READMEæ›´æ–° âœ…
- [x] .env.exampleæ›´æ–° âœ…
- [x] æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° âœ…
- [x] SETUP_API_KEY.mdæ›´æ–° âœ…

**å®Œäº†æ—¥**: 2025-10-17

#### âœ… Mile 5: å®Ÿéš›ã®Twitter APIçµ±åˆï¼ˆéƒ¨åˆ†çš„ã«å®Œäº†ï¼‰

- [x] Twitter Developer Accountã®æº–å‚™ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã§å®Ÿæ–½ï¼‰ âœ…
- [x] OAuth 1.0aèªè¨¼ã®å®Ÿè£… âœ…
- [x] å®Ÿéš›ã®APIå‘¼ã³å‡ºã—å®Ÿè£…ï¼ˆPostTweetï¼‰ âœ…
- [x] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®åŸºæœ¬å®Ÿè£… âœ…
- [x] ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ã®å®Ÿè£…ï¼ˆæœ¬ç•ª/ãƒ†ã‚¹ãƒˆåˆ‡ã‚Šæ›¿ãˆï¼‰ âœ…
- [ ] ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®å®Œå…¨å®Ÿè£… ğŸ”´ TODOï¼ˆãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ¶é™ã«ã‚ˆã‚Šï¼‰
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–ã®å®Ÿè£… ğŸŸ¡ ä»Šå¾Œã®æ‹¡å¼µ
- [ ] å®Ÿéš›ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®çµ±åˆãƒ†ã‚¹ãƒˆ ğŸŸ¡ ä»Šå¾Œã®æ‹¡å¼µ

**å®Œäº†æ—¥**: 2025-10-17ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿ï¼‰

---

**ãƒ¢ãƒƒã‚¯å®Ÿè£…ã®å®Œäº†**: Mile 1-4å®Œäº†ï¼ˆ6-10æ™‚é–“ï¼‰
**å®ŸAPIçµ±åˆã®è¦‹ç©ã‚‚ã‚Š**: Mile 5ï¼ˆ4-6æ™‚é–“ï¼‰
**åˆè¨ˆè¦‹ç©ã‚‚ã‚Š**: 10-16æ™‚é–“

### 9. ãƒªã‚¹ã‚¯ã¨åˆ¶ç´„

#### 9.1 Twitter APIåˆ¶é™

- ç„¡æ–™ãƒ—ãƒ©ãƒ³ã®å ´åˆã€æŠ•ç¨¿æ•°ã«åˆ¶é™ã‚ã‚Š
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸå ´åˆã®ä»£æ›¿æ¡ˆãŒå¿…è¦

#### 9.2 æ‚ªç”¨ã®ãƒªã‚¹ã‚¯

- ç‚ä¸Šã‚’æ„å›³çš„ã«å¼•ãèµ·ã“ã™æ‚ªç”¨ã®å¯èƒ½æ€§
- å…è²¬äº‹é …ã®æ˜è¨˜ãŒå¿…é ˆ
- åˆ©ç”¨è¦ç´„ã®æ•´å‚™ãŒå¿…è¦

#### 9.3 æŠ€è¡“çš„åˆ¶ç´„

- OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼ã®è¤‡é›‘ã•
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¶²ç¾…æ€§
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ã®å¾¹åº•

### 10. å°†æ¥ã®æ‹¡å¼µæ¡ˆ

- [ ] Twitterä»¥å¤–ã®SNSå¯¾å¿œï¼ˆFacebook, Instagram, Threadsãªã©ï¼‰
- [ ] æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½
- [ ] æŠ•ç¨¿å±¥æ­´ã®ä¿å­˜
- [ ] æŠ•ç¨¿å¾Œã®åå¿œåˆ†æï¼ˆã„ã„ã­æ•°ã€ãƒªãƒ—ãƒ©ã‚¤æ•°ãªã©ï¼‰
- [ ] A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠ•ç¨¿æ¯”è¼ƒï¼‰

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Twitter API v2 Documentation](https://developer.twitter.com/en/docs/twitter-api)
- [go-twitter Library](https://github.com/dghubble/go-twitter)
- [OAuth 1.0a Flow](https://developer.twitter.com/en/docs/authentication/oauth-1-0a)
- [Twitter Developer Portal](https://developer.twitter.com/en/portal/dashboard)

---

**ä½œæˆæ—¥**: 2025-10-17
**æœ€çµ‚æ›´æ–°**: 2025-10-17
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… **Twitter APIçµ±åˆå®Œäº†**ï¼ˆPhase 1-3ã€Mile 1-5éƒ¨åˆ†å®Œäº†ï¼‰

## å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### âœ… Phase 1: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¨ãƒ†ã‚¹ãƒˆ

- GraphQLã‚¹ã‚­ãƒ¼ãƒå®šç¾©å®Œäº†
- gqlgen ã«ã‚ˆã‚‹è‡ªå‹•ç”Ÿæˆå®Œäº†

### âœ… Phase 2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

- **Twitter API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…å®Œäº†** ([backend/twitter/client.go](../backend/twitter/client.go))
  - OAuth 1.0aèªè¨¼çµ±åˆ âœ…
  - ãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿æ©Ÿèƒ½ï¼ˆå®Ÿéš›ã®APIå‘¼ã³å‡ºã—ï¼‰ âœ…
  - ãƒ¢ãƒƒã‚¯/æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ âœ…
- GraphQL Resolverå®Ÿè£…å®Œäº† ([backend/graph/schema.resolvers.go](../backend/graph/schema.resolvers.go))
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œå‚™ï¼ˆå…¨ãƒ†ã‚¹ãƒˆåˆæ ¼ã€ã‚«ãƒãƒ¬ãƒƒã‚¸69.0%ï¼‰

### âœ… Phase 3: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

- TwitterPostButtonã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…å®Œäº† ([frontend/src/components/TwitterPostButton.tsx](../frontend/src/components/TwitterPostButton.tsx))
- ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°å®Ÿè£…å®Œäº†
- ResultDisplayã¸ã®çµ±åˆå®Œäº†
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Œå‚™ (7/7ãƒ†ã‚¹ãƒˆåˆæ ¼)

### âœ… Mile 4: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

- README.mdæ›´æ–°å®Œäº†
- .env.exampleæ›´æ–°å®Œäº†
- æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†

## ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

**å®Ÿè£…æ–¹å¼**: **Twitter APIçµ±åˆå®Œäº†**ï¼ˆãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿ï¼‰

- OAuth 1.0aèªè¨¼ã‚’ä½¿ç”¨ã—ãŸå®Ÿéš›ã®Twitter APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
- `PostTweet`ãƒ¡ã‚½ãƒƒãƒ‰ã¯å®Ÿéš›ã®Twitter APIã‚’å‘¼ã³å‡ºã—
- ãƒ†ã‚¹ãƒˆç’°å¢ƒã§ã¯è‡ªå‹•çš„ã«ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹
- æœ¬ç•ªç’°å¢ƒã§ã¯æœ‰åŠ¹ãªAPIèªè¨¼æƒ…å ±ãŒã‚ã‚Œã°å®Ÿéš›ã«æŠ•ç¨¿å¯èƒ½

**å‹•ä½œç¢ºèªæ¸ˆã¿**:

- âœ… èªè¨¼æƒ…å ±ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- âœ… 280æ–‡å­—åˆ¶é™ãƒã‚§ãƒƒã‚¯
- âœ… ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒ»å…è²¬æ–‡è¨€ã®è¿½åŠ æ©Ÿèƒ½
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… OAuth 1.0aèªè¨¼çµ±åˆ
- âœ… å®Ÿéš›ã®Twitter APIå‘¼ã³å‡ºã—ï¼ˆPostTweetï¼‰
- âœ… ãƒ¢ãƒƒã‚¯/æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
- âœ… ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®çµ±åˆ
- âœ… ã™ã¹ã¦ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆåˆæ ¼ï¼ˆã‚«ãƒãƒ¬ãƒƒã‚¸69.0%ï¼‰
- âš ï¸ **ç”»åƒä»˜ãæŠ•ç¨¿æ©Ÿèƒ½** (ãƒ¢ãƒƒã‚¯å®Ÿè£…ã®ã¿ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆ¶é™ã«ã‚ˆã‚Š)

### ç”»åƒä»˜ãæŠ•ç¨¿æ©Ÿèƒ½ã®å®Ÿè£…è©³ç´°

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: [backend/twitter/client.go](../backend/twitter/client.go)

å®Ÿè£…ã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰:

1. **`uploadMedia(ctx, imageData []byte) (string, error)`**
   - ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’Twitterã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒ¡ãƒ‡ã‚£ã‚¢IDã‚’è¿”ã™
   - ç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯å®Ÿè£…ï¼ˆ`"mock-media-id-123456789"`ã‚’è¿”ã™ï¼‰

2. **`postTweetWithMediaID(ctx, text, mediaID string, options) (*TweetResult, error)`**
   - ãƒ¡ãƒ‡ã‚£ã‚¢IDä»˜ãã§ãƒ„ã‚¤ãƒ¼ãƒˆã‚’æŠ•ç¨¿
   - ãƒ†ã‚­ã‚¹ãƒˆ + ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚° + å…è²¬æ–‡è¨€ã®ã‚µãƒãƒ¼ãƒˆ
   - 280æ–‡å­—åˆ¶é™ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯å®Ÿè£…

3. **`PostTweetWithImage(ctx, text string, imageData []byte, options) (*TweetResult, error)`** (å…¬é–‹API)
   - ç”»åƒãƒ‡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚Šã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰â†’æŠ•ç¨¿ã®ä¸€é€£ã®ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œ
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ã
   - ç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯å®Ÿè£…

#### GraphQL APIæ‹¡å¼µ

**ãƒ•ã‚¡ã‚¤ãƒ«**: [backend/graph/schema.graphqls](../backend/graph/schema.graphqls)

```graphql
input TwitterPostInput {
  text: String!
  imageUrl: String        # ç”»åƒURL (Data URLã¾ãŸã¯HTTP(S) URL)
  addHashtag: Boolean
  addDisclaimer: Boolean
}
```

**ãƒªã‚¾ãƒ«ãƒãƒ¼**: [backend/graph/schema.resolvers.go](../backend/graph/schema.resolvers.go)

- `PostToTwitter`ãƒªã‚¾ãƒ«ãƒãƒ¼ãŒ`imageUrl`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾å¿œ
- `extractImageDataFromURL`ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã§Data URLã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰
- ç”»åƒãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯`PostTweetWithImage`ã‚’å‘¼ã³å‡ºã—

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…

**ãƒ•ã‚¡ã‚¤ãƒ«**: [frontend/src/components/TwitterPostButton.tsx](../frontend/src/components/TwitterPostButton.tsx)

æ›´æ–°å†…å®¹:

- `imageUrl?: string` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¿½åŠ 
- GraphQL Mutationã«`imageUrl`ã‚’å«ã‚ã‚‹
- ç”»åƒã®æœ‰ç„¡ã«é–¢ã‚ã‚‰ãšåŒã˜UIã§æŠ•ç¨¿å¯èƒ½

**ä½¿ç”¨ä¾‹**:

```typescript
<TwitterPostButton
  text={result.inflammatory}
  imageUrl={generatedImageUrl}
  addHashtag={true}
  addDisclaimer={true}
/>
```

#### ãƒ†ã‚¹ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: [backend/twitter/media_test.go](../backend/twitter/media_test.go)

ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸: **89.8%**

ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹:
- ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æˆåŠŸ
- ç©ºã®ç”»åƒãƒ‡ãƒ¼ã‚¿ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒ¡ãƒ‡ã‚£ã‚¢IDä»˜ããƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿
- ç”»åƒä»˜ããƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆç©ºãƒ†ã‚­ã‚¹ãƒˆã€ç©ºç”»åƒãƒ‡ãƒ¼ã‚¿ï¼‰

## å®Ÿè£…å®Œäº†

### âœ… å®Œäº†: Twitter APIçµ±åˆï¼ˆãƒ†ã‚­ã‚¹ãƒˆ + ç”»åƒæŠ•ç¨¿ï¼‰

**æœ€çµ‚æ›´æ–°: 2025-10-17**

TwitteræŠ•ç¨¿æ©Ÿèƒ½ã¯å®Œå…¨ã«å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€æœ‰åŠ¹ãªTwitter APIèªè¨¼æƒ…å ±ãŒã‚ã‚Œã°ãƒ†ã‚­ã‚¹ãƒˆã¨ç”»åƒã®ä¸¡æ–¹ã‚’æŠ•ç¨¿ã§ãã¾ã™ã€‚

**å®Ÿè£…æ¸ˆã¿**:
- âœ… OAuth 1.0aèªè¨¼ã®çµ±åˆ
- âœ… `PostTweet`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ï¼ˆå®Ÿéš›ã®APIå‘¼ã³å‡ºã—ï¼‰
- âœ… **Media Upload APIå®Ÿè£…ï¼ˆå®Œå…¨å®Ÿè£…æ¸ˆã¿ï¼‰**
  - ã‚«ã‚¹ã‚¿ãƒ HTTPå®Ÿè£…ã§Twitter Media Upload API v1.1ã‚’ç›´æ¥å‘¼ã³å‡ºã—
  - Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚‹ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
  - `media_id_string`ã®å–å¾—ã¨æŠ•ç¨¿ã¸ã®ç´ä»˜ã‘
- âœ… `PostTweetWithImage`ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…ï¼ˆç”»åƒä»˜ãæŠ•ç¨¿ï¼‰
- âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- âœ… ãƒ¢ãƒƒã‚¯/æœ¬ç•ªãƒ¢ãƒ¼ãƒ‰è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆ
- âœ… çµ±åˆãƒ†ã‚¹ãƒˆä½œæˆï¼ˆç’°å¢ƒå¤‰æ•°ã§æœ‰åŠ¹åŒ–ï¼‰

**å®Ÿè£…æ–¹å¼**:
- **ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `https://upload.twitter.com/1.1/media/upload.json`
- **èªè¨¼**: OAuth 1.0aï¼ˆæ—¢å­˜ã®httpClientã‚’ä½¿ç”¨ï¼‰
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: `application/x-www-form-urlencoded`å½¢å¼
- **ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
  - `media_data`: Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãŸç”»åƒãƒ‡ãƒ¼ã‚¿
  - `media_category`: "tweet_image"
- **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `media_id_string`ã‚’å–å¾—ã—ã€ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿æ™‚ã«`MediaIds`ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®š

**ãƒ†ã‚¹ãƒˆçµæœ**:
- ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ: âœ… ã™ã¹ã¦ãƒ‘ã‚¹
- ã‚«ãƒãƒ¬ãƒƒã‚¸: 54.3% (twitter package)
- çµ±åˆãƒ†ã‚¹ãƒˆ: âœ… ä½œæˆå®Œäº†ï¼ˆ`RUN_TWITTER_INTEGRATION_TESTS=true`ã§å®Ÿè¡Œï¼‰

**ä½¿ç”¨æ–¹æ³•**:
```go
// ç”»åƒä»˜ããƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿
result, err := client.PostTweetWithImage(ctx, "ãƒ†ã‚­ã‚¹ãƒˆ", imageData, WithHashtag(), WithDisclaimer())
```

### ğŸŸ¡ Phase B: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆé‡è¦ãƒ»ä¸­å„ªå…ˆåº¦ï¼‰

#### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–

- [ ] èªè¨¼ã‚¨ãƒ©ãƒ¼ï¼ˆ401 Unauthorizedï¼‰ã®å‡¦ç†
- [ ] ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ï¼ˆ429 Too Many Requestsï¼‰ã®å‡¦ç†
- [ ] é‡è¤‡ãƒ„ã‚¤ãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ï¼ˆ403 Forbidden - Status is a duplicateï¼‰ã®å‡¦ç†
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®ãƒªãƒˆãƒ©ã‚¤å‡¦ç†
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿”å´

#### 4. ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾ç­–ã®å®Ÿè£…

**Twitter APIåˆ¶é™**:
- ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿: 300ãƒ„ã‚¤ãƒ¼ãƒˆ/3æ™‚é–“ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ï¼‰
- ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: åˆ¶é™ã‚ã‚Š

**å®Ÿè£…ãŒå¿…è¦**:
- [ ] ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´: é€£ç¶šæŠ•ç¨¿é˜²æ­¢ï¼ˆæœ€ä½10ç§’é–“éš”ï¼‰
- [ ] ã‚µãƒ¼ãƒãƒ¼å´: ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
- [ ] ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½ï¼ˆExponential Backoffï¼‰

```go
type RateLimiter struct {
    lastPostTime time.Time
    mu           sync.Mutex
}

func (r *RateLimiter) CanPost() bool {
    r.mu.Lock()
    defer r.mu.Unlock()
    return time.Since(r.lastPostTime) >= 10*time.Second
}
```

### ğŸŸ¢ Phase C: ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ï¼ˆæ¨å¥¨ãƒ»ä¸­å„ªå…ˆåº¦ï¼‰

#### 5. çµ±åˆãƒ†ã‚¹ãƒˆã®ä½œæˆ

- [ ] å®Ÿéš›ã®Twitterã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ã®æŠ•ç¨¿ãƒ†ã‚¹ãƒˆ
- [ ] 280æ–‡å­—åˆ¶é™ã®ç¢ºèª
- [ ] ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒ»å…è²¬æ–‡è¨€ã®è¿½åŠ ç¢ºèª
- [ ] ç”»åƒä»˜ãæŠ•ç¨¿ã®ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¢ºèªï¼ˆèªè¨¼å¤±æ•—ã€ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãªã©ï¼‰

#### 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

- [ ] Secret Managerã‚’ä½¿ã£ãŸAPIã‚­ãƒ¼ç®¡ç†ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- [ ] æŠ•ç¨¿å†…å®¹ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] CSRFãƒˆãƒ¼ã‚¯ãƒ³ã®å®Ÿè£…ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

### âšª Phase D: å°†æ¥ã®æ‹¡å¼µï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ»ä½å„ªå…ˆåº¦ï¼‰

- [ ] Twitterä»¥å¤–ã®SNSå¯¾å¿œï¼ˆThreads, Bluesky, Mastodonãªã©ï¼‰
- [ ] æŠ•ç¨¿ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ©Ÿèƒ½
- [ ] æŠ•ç¨¿å±¥æ­´ã®ä¿å­˜
- [ ] æŠ•ç¨¿å¾Œã®åå¿œåˆ†æï¼ˆã„ã„ã­æ•°ã€ãƒªãƒ—ãƒ©ã‚¤æ•°ãªã©ï¼‰
- [ ] A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ï¼ˆè¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã®æŠ•ç¨¿æ¯”è¼ƒï¼‰

### ğŸ“Š å®Ÿè£…è¦‹ç©ã‚‚ã‚Šï¼ˆæ›´æ–°ï¼‰

| Phase | ä½œæ¥­å†…å®¹ | è¦‹ç©ã‚‚ã‚Šæ™‚é–“ | å„ªå…ˆåº¦ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|-------|---------|------------|--------|-----------|
| Phase Aï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰ | Twitter APIå®Ÿè£… | ~~4-6æ™‚é–“~~ | ~~ğŸ”´ é«˜~~ | âœ… **å®Œäº†** |
| Phase Aï¼ˆç”»åƒï¼‰ | Media Upload APIå®Ÿè£… | ~~3-5æ™‚é–“~~ | ~~ğŸŸ¡ ä¸­~~ | âœ… **å®Œäº†** (2025-10-17) |
| Phase B | ã‚¨ãƒ©ãƒ¼å‡¦ç†ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™ | 2-3æ™‚é–“ | ğŸŸ¢ ä½ | ğŸŸ¡ åŸºæœ¬å®Ÿè£…æ¸ˆ |
| Phase C | ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ | 2-4æ™‚é–“ | ğŸŸ¢ ä½ | âœ… å®Œäº† |
| Phase D | å°†æ¥ã®æ‹¡å¼µ | 10+æ™‚é–“ | âšª ä½ | ğŸ”´ æœªç€æ‰‹ |

**âœ… å®Œäº†**: ãƒ†ã‚­ã‚¹ãƒˆ + ç”»åƒä»˜ãæŠ•ç¨¿æ©Ÿèƒ½ãŒå®Œå…¨ã«å®Ÿè£…ã•ã‚Œã€å®Ÿéš›ã®Twitterã¸ã®æŠ•ç¨¿ãŒå¯èƒ½ã§ã™ã€‚

### ğŸš€ ä½¿ç”¨é–‹å§‹ã®æ‰‹é †

TwitteræŠ•ç¨¿æ©Ÿèƒ½ã¯å®Œå…¨ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§ä½¿ç”¨é–‹å§‹ã§ãã¾ã™:

1. **Twitter Developer Accountã®å–å¾—**ï¼ˆ[è©³ç´°ã¯ã“ã¡ã‚‰](#61-twitter-developer-portalã§ã‚¢ãƒ—ãƒªä½œæˆ)ï¼‰
2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**: `backend/.env`ã«Twitter APIèªè¨¼æƒ…å ±ã‚’è¿½åŠ 
   ```env
   TWITTER_API_KEY=your_api_key_here
   TWITTER_API_SECRET=your_api_secret_here
   TWITTER_ACCESS_TOKEN=your_access_token_here
   TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret_here
   ```
3. **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•**: `docker-compose up`
4. **æŠ•ç¨¿ãƒ†ã‚¹ãƒˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ç‚ä¸Šãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆã—ã€ã€Œğ•ã«æŠ•ç¨¿ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

**æ©Ÿèƒ½çŠ¶æ…‹**:
- âœ… ãƒ†ã‚­ã‚¹ãƒˆæŠ•ç¨¿: å®Œå…¨ã«å‹•ä½œ
- âœ… ç”»åƒä»˜ãæŠ•ç¨¿: å®Œå…¨ã«å‹•ä½œï¼ˆMedia Upload APIå®Ÿè£…æ¸ˆã¿ï¼‰

### ğŸ§ª çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

å®Ÿéš›ã®Twitter APIã‚’ä½¿ã£ãŸçµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯:

```bash
# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
export RUN_TWITTER_INTEGRATION_TESTS=true
export TWITTER_API_KEY=your_api_key
export TWITTER_API_SECRET=your_api_secret
export TWITTER_ACCESS_TOKEN=your_access_token
export TWITTER_ACCESS_TOKEN_SECRET=your_access_token_secret

# çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cd backend
go test ./twitter -v -run Integration

# å‡ºåŠ›ä¾‹:
# === RUN   TestIntegration_UploadMediaAndPostTweet
# === RUN   TestIntegration_UploadMediaAndPostTweet/upload_media
#     integration_test.go:66: Successfully uploaded media with ID: 1234567890
# === RUN   TestIntegration_UploadMediaAndPostTweet/post_tweet_with_image
#     integration_test.go:87: Successfully posted tweet with image: https://twitter.com/user/status/1234567890
# --- PASS: TestIntegration_UploadMediaAndPostTweet (3.45s)
```

**æ³¨æ„**: çµ±åˆãƒ†ã‚¹ãƒˆã¯å®Ÿéš›ã®Twitterã«æŠ•ç¨¿ã•ã‚Œã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### ğŸ“š å‚è€ƒè³‡æ–™

- [Twitter API v2 Documentation](https://developer.twitter.com/en/docs/twitter-api)
- [go-twitter Library](https://github.com/dghubble/go-twitter)
- [OAuth 1.0a Flow](https://developer.twitter.com/en/docs/authentication/oauth-1-0a)
- [Twitter Developer Portal](https://developer.twitter.com/en/portal/dashboard)
